<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
	
	<link rel="stylesheet" href="css/styles.css">


	  <style class="INLINE_PEN_STYLESHEET_ID">
		    /*Hoja de estilos*/
		#entorno {
			/*
			display: block;
			margin: 0 auto;*/
		}

		#fondo {
			opacity: 0.3;
		}

		.content-blocks{
			display: table;
			width: 100%;

		}
		.blocks{
			display: inline-table;
			padding: 5px;
			
			width: 22%;
		
			background: #fff;
			border: 2px solid #05394c;

		}
		.content-block{
			width: 50%;
			transform: rotateY(90deg);
			transition: 0.5s;
			margin-left: 25%;

		}
		.content-block img{
			width: 100%;		
			
  			
		}
		.text{
			width: 100%;
			text-align: center;
			font-size: 35px;
		}
		.s1{
			margin-top: 10px;
			font-size: 15px;
		}
		.s2{
			margin: 10px 0;
			font-size: 15px;
		}		
	  </style>
	<script src="https://cpwebassets.codepen.io/assets/editor/iframe/iframeConsoleRunner-7f4d47902dc785f30dedcac9c996b9f31d4dfcc33567cc48f0431bc918c2bf05.js"></script>
	<script src="https://cpwebassets.codepen.io/assets/editor/iframe/iframeRefreshCSS-bb9a2ba1f03f6147732cb3cd52ac86c6b24524aa87a05ed0b726f11e46d7e277.js"></script>
	<script src="https://cpwebassets.codepen.io/assets/editor/iframe/iframeRuntimeErrors-4f205f2c14e769b448bcf477de2938c681660d5038bc464e3700256713ebe261.js"></script>


	<title>MathPluzz</title>
</head>
<body style="overflow: hidden;">
	
	<audio id="bgmusic" src="music/musica.mp3" autoplay></audio>
	<video playsinline autoplay muted loop id="bgvid">
  		
  		<source src="video/back.mp4" type="video/mp4">
	</video>

	<div class="content">
		<div class="container">
			<div class="row " style="opacity: 0.9;">
				<div class="card mt-3 bg-info ">
				  <div class="card-header" style="text-align:center;">
				   <h2>MEMORAMA</h2>
				  </div>
				</div>				
			</div>
			<hr class="my-2">							
									 
			 	<div class="row" style="opacity: 0.9;">
			 		<div class="col-sm-9">
			 			<div class="card border-info" style="height: 29rem;">
			 				<div class="card-body" >

							<div class="content-blocks" id="space-imgs" style="text-align:center;"></div>

			 				</div>
			 			</div>
			 		</div>
			 		<div class="col-sm-3">
			 			<div class="card border-info" style="height: 29rem;">
			 				<div class="card-header">
								<div class="row">
									<div class="col"><a href=""><img src="img/reset.png" alt="" onclick="javascript:window.location.reload();"></a></div>
									<div class="col" style="text-align:right;">							
										<a href="#"><img src="img/info_menu.png" alt="" onclick="
										alert('\nSe presentan pares de cartas en donde una de ellas contiene una operación y la otra contiene el resultado. La dinámica es encontrar el par de cartas correspondiente problema-resultado o resultado-problema.');"></a>
									</div>

								</div>

								</div>
			 				<div class="card-body">

			 					
							<div class="text s1 card-title">Intenta encontrar los pares de cada imagen. Cada cuadrado blanco es una imagen oculta.</div>
							<div class="text s2 "> <br><h5>Numero de intentos: <span id="intentos">0</span></h5>  </div>
			 				</div>									 				
			 			</div>

			 		</div>						 											
			 	</div>
		
			<hr class="my-2">


		</div>

		<footer>
			<div class="content container">
				
				<div class="row justify-content-between ">
					<div class="col-md ">
					  
					  	<a href="menu_eleccion.html"><img src="img/atras.png" alt=""></a>
					</div>
					<div class="col-md " style="text-align:right;">
						<a id="musik" href="#"><img id="imagenC" src="img/audio_off.png" alt=""></a>							
					</div>					
				</div>
			</div>
	
		</footer>

	</div>





</body>

<script src="js/jquery.min.js"></script>
<script src="js/jquery-3.3.1.slim.min.js"></script>


<script type="text/javascript">
		var ar_img=[];

		var cant = [0,0,0,0,0,0,0,0,0];

		var tam_game=8;
		for (var i = 0; i < tam_game; i++) {
			ar_img.push(i+1);
			ar_img.push(i+1);
		}
		var dom=document.getElementById("space-imgs");
		var html='';
		var counter=1;

		const button = document.getElementById("musik");
		const icon = document.getElementById("imagenC");
		const audio = document.getElementById("bgmusic");
		

		button.addEventListener("click", () => {
		if (audio.paused) {
			audio.volume = 0.2;
			audio.play();
			icon.src = "img/audio_on.png"
			
		} else {
			audio.pause();
			
			icon.src = "img/audio_off.png"
		}
		//button.classList.add("fade");
		});		


		for(var i=0; i < 100; i++){

			var carp=Math.round(Math.random()*5)+1;
			console.log(carp)
			i++;

		}
		

		while(ar_img.length>0){
			var newar=[];
			if (ar_img.length==1) {
				html+=
				'<div class="blocks">'+
					'<div class="content-block" data-partner="'+ar_img[0]+'" data-clicked="0" data-enc="0" id="'+counter+'">'+
						'<img src="img/j_mem/r1/bb'+ar_img[0]+'.jpg"/>'
					'</div>'+
				'</div>';
			}else{
				var index=Math.round(Math.random()*ar_img.length)+1;
				for (var i = 0; i < ar_img.length; i++) {
					if (i==index) {
						
						if(cant[ar_img[i]]==0){
						html+=
						'<div class="blocks">'+
							'<div class="content-block" data-partner="'+ar_img[i]+'" data-clicked="0" data-enc="0" id="'+counter+'">'+
								'<img src="img/j_mem/r1/b'+ar_img[i]+'.jpg">'+
							'</div>'+
						'</div>';							
						}else if(cant[ar_img[i]]==1){
							html+=
							'<div class="blocks">'+
								'<div class="content-block" data-partner="'+ar_img[i]+'" data-clicked="0" data-enc="0" id="'+counter+'">'+
									'<img src="img/j_mem/r1/bb'+ar_img[i]+'.jpg">'+
								'</div>'+
							'</div>';						
						}

						cant[ar_img[i]]++
						console.log(ar_img[i]);
						console.log('--'+cant[ar_img[i]]);
					}else{
						newar.push(ar_img[i]);
					}
				}
			}
			ar_img=[];
			ar_img=newar;
			counter++;
		}
		dom.innerHTML=html;

		var ar_inicial=document.getElementsByClassName("blocks");

		var id_ant=0;
		var counter_clicks=0;
		var img_ant=0;
		var intentos=0;
		var counter_enc=0;
		var validate_click=true;
		function myfunction(){
			if (validate_click) {
				var element=this.getElementsByClassName("content-block")[0];
				if(element.id!=id_ant && element.dataset.enc!="1"){
					element.dataset.clicked="1";
					element.style.transform="rotateY(0deg)";
					if (counter_clicks==0) {
						img_ant=element.dataset.partner;
						id_ant=element.id;
						counter_clicks++;
					}else{
						validate_click=false;
						setTimeout(function(){
							var ar=document.getElementsByClassName("content-block");
							if (img_ant==element.dataset.partner) {
								counter_enc++;
								//IMAGENES IGUALES - EL primero y el segundo
								for (var i = 0; i < ar.length; i++) {
									if (ar[i].dataset.clicked=="1") {
										ar[i].dataset.enc="1"
									}
								}
								if (tam_game==counter_enc) {
									//alert("Ganaste!");
									if(confirm("\n¡Has Ganado! \n\n¿Quieres intentarlo de nuevo?")){
										window.location.reload();
									}else{
										window.location.href = 'menu_eleccion.html';
									}									
								}
							}else{
								for (var i = 0; i < ar.length; i++) {
									if (ar[i].dataset.enc=="0") {
										ar[i].style.transform="rotateY(90deg)";
										ar[i].dataset.clicked="0";
									}
								}
							}
							counter_clicks=0;
							img_ant=0;
							intentos++;
							id_ant=0;
							validate_click=true;
							document.getElementById("intentos").innerHTML=intentos;
						},500);
					}
				}
			}
		}

		for (var i = 0; i < ar_inicial.length; i++) {
			ar_inicial[i].addEventListener('click',myfunction,false);
		}


     function load() {
        alert("\nPara iniciar el juego oprima ACEPTAR");
     }
     window.onload = load;		
	</script>

</html>